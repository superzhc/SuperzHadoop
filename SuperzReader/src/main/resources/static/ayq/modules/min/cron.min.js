layui.define(["form"],function(m){function d(b){return void 0!=b&&""!==b}var g=layui.$,h=layui.form,l={v:"1.0.0",index:layui.cron?layui.cron.index+1E4:0,set:function(b){this.config=g.extend({},this.config,b);return this},on:function(b,a){return layui.onevent.call(this,"cron",b,a)},ready:function(b){layui.link(layui.cache.base+"cron/cron.css?v\x3d"+l.v,b,"cron");return this}},n=function(){var b=this;return{reload:function(a){b.reload.call(b,a)},config:b.config}},f=function(b){var a=this;a.index=++l.index;a.config=g.extend({},a.config,l.config,b);l.ready(function(){a.init()})};f.prototype.config={value:"* * * * * ?",lang:"cn",trigger:"focus",done:null,run:null};f.prototype.lang=function(){var b={cn:{tabs:"\u79d2\u5206\u65f6\u65e5\u6708\u5468\u5e74".split(""),tools:{confirm:"\u786e\u5b9a",parse:"\u89e3\u6790",run:"\u8fd0\u884c"}},en:{tabs:"Seconds Minutes Hours Days Months Weeks Years".split(" "),weeks:"Su Mo Tu We Th Fr Sa".split(" "),month:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),tools:{confirm:"Confirm",parse:"Parse",run:"Run"}}};return b[this.config.lang]||b.cn};f.prototype.init=function(){var b=this.config;this.$elem=g(b.elem);b.elem=this.$elem[0];if(b.elem){b.value||(b.value="* * * * * ?");var a=b.value.split(" ");this.cron=[];for(var c=1;7>=c;c++)6>c?this.cron.push(a[c-1]||"*"):7>c?this.cron.push(a[c-1]||"?"):this.cron.push(a[c-1]||"");this.isInput(b.elem)||"focus"!==b.trigger||(b.trigger="click");console.log("\u7ed1\u5b9a\u4e8b\u4ef6.");this.events()}};f.prototype.events=function(){var b=this,a=b.config;a.elem&&!a.elem.eventHandler&&(b.$elem.on(a.trigger,function(){b.render()}),g(document).on("click",function(c){b.elemCron&&b.elemCron.contains(c.target)||c.target===a.elem||b.remove()}).on("keydown",function(a){13===a.keyCode&&(a.preventDefault(),layer.msg("\u53d6\u6d88\u4e8b\u4ef6\u9ed8\u8ba4\u52a8\u4f5c\uff0c\u70b9\u51fb\u786e\u5b9a\u6309\u94ae"))}),g(window).on("resize",function(){if(!a.elem||!g(".layui-cron")[0])return!1;b.position()}),a.elem.eventHandler=!0)};f.prototype.render=function(){var b=this,a=b.lang(),c=b.$elemCron=g('\x3cdiv class\x3d"layui-cron"\x3e\x3c/div\x3e'),d=[],f=b.getSecondsElem(),p=b.getMinutesElem(),q=b.getHoursElem(),e=b.getDaysElem(),r=b.getMonthsElem(),t=b.getWeeksElem(),l=b.getYearsElem();d.push('\x3cdiv class\x3d"layui-tab layui-tab-card"\x3e','\x3cul class\x3d"layui-tab-title"\x3e');layui.each(a.tabs,function(a,b){0==a?d.push('\x3cli class\x3d"layui-this"\x3e',b,"\x3c/li\x3e"):d.push("\x3cli\x3e",b,"\x3c/li\x3e")});d.push("\x3c/ul\x3e",'\x3cdiv class\x3d"layui-tab-content" style\x3d"width:651px;min-height:300px;"\x3e',f,p,q,e,r,t,l,"\x3c/div\x3e","\x3c/div\x3e");c.append(d.join(""));c.append('\x3cdiv class\x3d"cron-title"\x3e\u6700\u8fd1\u8fd0\u884c\u65f6\u95f4\x3c/div\x3e\x3cdiv class\x3d"cron-box" id\x3d"run-list"\x3e\x3c/div\x3e\x3cdiv class\x3d"cron-box"\x3e\x3cdiv class\x3d"cron-footer-btns"\x3e\x3cspan lay-type\x3d"run" class\x3d"cron-btns-run"\x3e\u8fd0\u884c\x3c/span\x3e\x3cspan lay-type\x3d"confirm" class\x3d"cron-btns-confirm"\x3e\u786e\u5b9a\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e');g("body").append(c);b.elemCron=b.$elemCron[0];h.render();b.position();c.find(".cron-footer-btns span").on("click",function(){var a=g(this).attr("lay-type");b.tool(this,a)})};f.prototype.getSecondsElem=function(){var b=['\x3cdiv class\x3d"layui-tab-item layui-show layui-form" lay-filter\x3d"cronSecForm"\x3e'],a=["","","",""];val=["","","","",[]];"*"==this.cron[0]?a[0]="checked":2==this.cron[0].split("-").length?(a[1]="checked",val[0]=this.cron[0].split("-")[0],val[1]=this.cron[0].split("-")[1]):2==this.cron[0].split("/").length?(a[2]="checked",val[2]=this.cron[0].split("/")[0],val[3]=this.cron[0].split("/")[1]):(a[3]="checked",val[4]=this.cron[0].split(","));b.push('\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[0]" value\x3d"all" title\x3d"\u6bcf\u79d2" ',a[0],"\x3e\x3c/div\x3e",'\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[0]" value\x3d"range" title\x3d"\u5468\u671f" ',a[1],"/\x3e",'\x3cdiv class\x3d"cron-input-mid"\x3e\u4ece\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"rangeStart" value\x3d"',val[0],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e-\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"rangeEnd" value\x3d"',val[1],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u79d2\x3c/div\x3e\x3cspan class\x3d"cron-tips"\x3e(0-59)\x3c/span\x3e\x3c/div\x3e','\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[0]" value\x3d"per" title\x3d"\u6309\u7167" ',a[2],"\x3e",'\x3cdiv class\x3d"cron-input-mid"\x3e\u4ece\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"perFrom" value\x3d"',val[2],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u79d2\u5f00\u59cb\uff0c\u6bcf\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"perVal" value\x3d"',val[3],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u79d2\u6267\u884c\u4e00\u6b21\x3c/div\x3e\x3cspan class\x3d"cron-tips"\x3e(0/60)\x3c/span\x3e\x3c/div\x3e','\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[0]" value\x3d"assign" title\x3d"\u6307\u5b9a" ',a[3],"\x3e\x3c/div\x3e");b.push("\x3cdiv\x3e");for(a=0;60>a;a++)b.push('\x3cinput type\x3d"checkbox" lay-skin\x3d"primary" name\x3d"seconds[',a,']" value\x3d"',a,'" title\x3d"',a,'" ',-1<val[4].indexOf(""+a)?"checked":"","\x3e");b.push("\x3c/div\x3e");b.push("\x3c/div\x3e");return b.join("")};f.prototype.getMinutesElem=function(){var b=['\x3cdiv class\x3d"layui-tab-item layui-form" lay-filter\x3d"cronMinForm"\x3e'],a=["","","",""];val=["","","","",[]];"*"==this.cron[1]?a[0]="checked":2==this.cron[1].split("-").length?(a[1]="checked",val[0]=this.cron[1].split("-")[0],val[1]=this.cron[1].split("-")[1]):2==this.cron[1].split("/").length?(a[2]="checked",val[2]=this.cron[1].split("/")[0],val[3]=this.cron[1].split("/")[1]):(a[3]="checked",val[4]=this.cron[1].split(","));b.push('\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[1]" value\x3d"all" title\x3d"\u6bcf\u5206" ',a[0],"\x3e\x3c/div\x3e",'\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[1]" value\x3d"range" title\x3d"\u5468\u671f" ',a[1],"/\x3e",'\x3cdiv class\x3d"cron-input-mid"\x3e\u4ece\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"rangeStart" value\x3d"',val[0],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e-\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"rangeEnd" value\x3d"',val[1],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u5206\x3c/div\x3e\x3cspan class\x3d"cron-tips"\x3e(0-59)\x3c/span\x3e\x3c/div\x3e','\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[1]" value\x3d"per" title\x3d"\u6309\u7167" ',a[2],"\x3e",'\x3cdiv class\x3d"cron-input-mid"\x3e\u4ece\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"perFrom" value\x3d"',val[2],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u5206\u5f00\u59cb\uff0c\u6bcf\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"perVal" value\x3d"',val[3],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u5206\u6267\u884c\u4e00\u6b21\x3c/div\x3e\x3cspan class\x3d"cron-tips"\x3e(0/60)\x3c/span\x3e\x3c/div\x3e','\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[1]" value\x3d"assign" title\x3d"\u6307\u5b9a" ',a[3],"\x3e\x3c/div\x3e");b.push("\x3cdiv\x3e");for(a=0;60>a;a++)b.push('\x3cinput type\x3d"checkbox" lay-skin\x3d"primary" name\x3d"minutes[',a,']" value\x3d"',a,'" title\x3d"',a,'"',-1<val[4].indexOf(""+a)?"checked":"","\x3e");b.push("\x3c/div\x3e");b.push("\x3c/div\x3e");return b.join("")};f.prototype.getHoursElem=function(){var b=['\x3cdiv class\x3d"layui-tab-item layui-form" lay-filter\x3d"cronHourForm"\x3e'],a=["","","",""];val=["","","","",[]];"*"==this.cron[2]?a[0]="checked":2==this.cron[2].split("-").length?(a[1]="checked",val[0]=this.cron[2].split("-")[0],val[1]=this.cron[2].split("-")[1]):2==this.cron[2].split("/").length?(a[2]="checked",val[2]=this.cron[2].split("/")[0],val[3]=this.cron[2].split("/")[1]):(a[3]="checked",val[4]=this.cron[2].split(","));b.push('\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[2]" value\x3d"all" title\x3d"\u6bcf\u5c0f\u65f6" ',a[0],"\x3e\x3c/div\x3e",'\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[2]" value\x3d"range" title\x3d"\u5468\u671f" ',a[1],"/\x3e",'\x3cdiv class\x3d"cron-input-mid"\x3e\u4ece\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"rangeStart" value\x3d"',val[0],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e-\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"rangeEnd" value\x3d"',val[1],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u65f6\x3c/div\x3e\x3cspan class\x3d"cron-tips"\x3e(0-23)\x3c/span\x3e\x3c/div\x3e','\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[2]" value\x3d"per" title\x3d"\u6309\u7167" ',a[2],"\x3e",'\x3cdiv class\x3d"cron-input-mid"\x3e\u4ece\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"perFrom" value\x3d"',val[2],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u65f6\u5f00\u59cb\uff0c\u6bcf\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"perVal" value\x3d"',val[3],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u65f6\u6267\u884c\u4e00\u6b21\x3c/div\x3e\x3cspan class\x3d"cron-tips"\x3e(0/24)\x3c/span\x3e\x3c/div\x3e','\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[2]" value\x3d"assign" title\x3d"\u6307\u5b9a" ',a[3],"\x3e\x3c/div\x3e");b.push("\x3cdiv\x3e");for(a=0;24>a;a++)b.push('\x3cinput type\x3d"checkbox" lay-skin\x3d"primary" name\x3d"hours[',a,']" value\x3d"',a,'" title\x3d"',a,'" ',-1<val[4].indexOf(""+a)?"checked":"","\x3e");b.push("\x3c/div\x3e");b.push("\x3c/div\x3e");return b.join("")};f.prototype.getDaysElem=function(){var b=['\x3cdiv class\x3d"layui-tab-item layui-form" lay-filter\x3d"cronDayForm"\x3e'],a="      ".split(" ");val=["","","","","",[]];"*"==this.cron[3]?a[0]="checked":"?"==this.cron[3]?a[1]="checked":2==this.cron[3].split("-").length?(a[2]="checked",val[0]=this.cron[3].split("-")[0],val[1]=this.cron[3].split("-")[1]):2==this.cron[3].split("/").length?(a[3]="checked",val[2]=this.cron[3].split("/")[0],val[3]=this.cron[3].split("/")[1]):-1<this.cron[3].indexOf("W")?(a[4]="checked",val[4]=this.cron[3].match(/(\d+)W$/)[1]):"L"==this.cron[3]?a[5]="checked":(a[6]="checked",val[5]=this.cron[3].split(","));b.push('\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[3]" value\x3d"all" title\x3d"\u6bcf\u5929" ',a[0],"\x3e\x3c/div\x3e",'\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[3]" value\x3d"none" title\x3d"\u4e0d\u6307\u5b9a" ',a[1],"\x3e\x3c/div\x3e",'\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[3]" value\x3d"range" title\x3d"\u5468\u671f" ',a[2],"/\x3e",'\x3cdiv class\x3d"cron-input-mid"\x3e\u4ece\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"rangeStart" value\x3d"',val[0],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e-\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"rangeEnd" value\x3d"',val[1],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u65e5\x3c/div\x3e\x3cspan class\x3d"cron-tips"\x3e(1-31)\x3c/span\x3e\x3c/div\x3e','\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[3]" value\x3d"per" title\x3d"\u6309\u7167" ',a[3],"\x3e",'\x3cdiv class\x3d"cron-input-mid"\x3e\u4ece\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"perFrom" value\x3d"',val[2],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u65e5\u5f00\u59cb\uff0c\u6bcf\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"perVal" value\x3d"',val[3],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u65e5\u6267\u884c\u4e00\u6b21\x3c/div\x3e\x3cspan class\x3d"cron-tips"\x3e(1/31)\x3c/span\x3e\x3c/div\x3e','\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[3]" value\x3d"work" title\x3d"\u5de5\u4f5c\u65e5" ',a[4],"\x3e",'\x3cdiv class\x3d"cron-input-mid"\x3e\u6bcf\u6708\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"workDay" value\x3d"',val[4],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u53f7\u6700\u8fd1\u7684\u90a3\u4e2a\u5de5\u4f5c\u65e5\x3c/div\x3e\x3cspan class\x3d"cron-tips"\x3e(1-31)\x3c/span\x3e\x3c/div\x3e','\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[3]" value\x3d"last" title\x3d"\u672c\u6708\u6700\u540e\u4e00\u65e5" ',a[5],"\x3e\x3c/div\x3e",'\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[3]" value\x3d"assign" title\x3d"\u6307\u5b9a" ',a[6],"\x3e\x3c/div\x3e");b.push("\x3cdiv\x3e");for(a=1;31>=a;a++)b.push('\x3cinput type\x3d"checkbox" lay-skin\x3d"primary" name\x3d"days[',a,']" value\x3d"',a,'" title\x3d"',a,'" ',-1<val[5].indexOf(""+a)?"checked":"","\x3e");b.push("\x3c/div\x3e");b.push("\x3c/div\x3e");return b.join("")};f.prototype.getMonthsElem=function(){var b=['\x3cdiv class\x3d"layui-tab-item layui-form" lay-filter\x3d"cronMonthForm"\x3e'],a=["","","","",""];val=["","","","",[]];"*"==this.cron[4]?a[0]="checked":"?"==this.cron[4]?a[1]="checked":2==this.cron[4].split("-").length?(a[2]="checked",val[0]=this.cron[4].split("-")[0],val[1]=this.cron[4].split("-")[1]):2==this.cron[4].split("/").length?(a[3]="checked",val[2]=this.cron[4].split("/")[0],val[3]=this.cron[4].split("/")[1]):(a[4]="checked",val[4]=this.cron[4].split(","));b.push('\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[4]" value\x3d"all" title\x3d"\u6bcf\u4e2a\u6708" ',a[0],"\x3e\x3c/div\x3e",'\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[4]" value\x3d"none" title\x3d"\u4e0d\u6307\u5b9a" ',a[1],"\x3e\x3c/div\x3e",'\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[4]" value\x3d"range" title\x3d"\u5468\u671f" ',a[2],"/\x3e",'\x3cdiv class\x3d"cron-input-mid"\x3e\u4ece\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"rangeStart" value\x3d"',val[0],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e-\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"rangeEnd" value\x3d"',val[1],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u6708\x3c/div\x3e\x3cspan class\x3d"cron-tips"\x3e(1-12)\x3c/span\x3e\x3c/div\x3e','\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[4]" value\x3d"per" title\x3d"\u6309\u7167" ',a[3],"\x3e",'\x3cdiv class\x3d"cron-input-mid"\x3e\u4ece\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"perFrom" value\x3d"',val[2],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u6708\u5f00\u59cb\uff0c\u6bcf\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"perVal" value\x3d"',val[3],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u6708\u6267\u884c\u4e00\u6b21\x3c/div\x3e\x3cspan class\x3d"cron-tips"\x3e(1/12)\x3c/span\x3e\x3c/div\x3e','\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[4]" value\x3d"assign" title\x3d"\u6307\u5b9a" ',a[4],"\x3e\x3c/div\x3e");b.push("\x3cdiv\x3e");for(a=0;24>a;a++)b.push('\x3cinput type\x3d"checkbox" lay-skin\x3d"primary" name\x3d"months[',a,']" value\x3d"',a,'" title\x3d"',a,'" ',-1<val[4].indexOf(""+a)?"checked":"","\x3e");b.push("\x3c/div\x3e");b.push("\x3c/div\x3e");return b.join("")};f.prototype.getWeeksElem=function(){var b=['\x3cdiv class\x3d"layui-tab-item layui-form" lay-filter\x3d"cronWeekForm"\x3e'],a="     ".split(" ");val=["","","","","",[]];"*"==this.cron[5]?a[0]="checked":"?"==this.cron[5]?a[1]="checked":2==this.cron[5].split("-").length?(a[2]="checked",val[0]=this.cron[5].split("-")[0],val[1]=this.cron[5].split("-")[1]):2==this.cron[5].split("#").length?(a[3]="checked",val[2]=this.cron[5].split("#")[0],val[3]=this.cron[5].split("#")[1]):/\d+L/.test(this.cron[5])?(a[4]="checked",val[4]=this.cron[5].match(/(\d+)L/)[1]):(a[5]="checked",val[5]=this.cron[5].split(","));b.push('\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[5]" value\x3d"all" title\x3d"\u6bcf\u4e2a\u5468" ',a[0],"\x3e\x3c/div\x3e",'\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[5]" value\x3d"none" title\x3d"\u4e0d\u6307\u5b9a" ',a[1],"\x3e\x3c/div\x3e",'\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[5]" value\x3d"range" title\x3d"\u5468\u671f" ',a[2],"/\x3e",'\x3cdiv class\x3d"cron-input-mid"\x3e\u4ece\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"rangeStart" value\x3d"',val[0],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e-\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"rangeEnd" value\x3d"',val[1],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u5468\x3c/div\x3e\x3cspan class\x3d"cron-tips"\x3e(1-7)\x3c/span\x3e\x3c/div\x3e','\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[5]" value\x3d"per" title\x3d"\u6309\u7167" ',a[3],"\x3e",'\x3cdiv class\x3d"cron-input-mid"\x3e\u7b2c\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"perFrom" value\x3d"',val[2],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u5468\u7684\u661f\u671f\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"perVal" value\x3d"',val[3],'"/\x3e','\x3cspan class\x3d"cron-tips"\x3e(1-4/1-7)\x3c/span\x3e\x3c/div\x3e','\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[5]" value\x3d"last" title\x3d"\u672c\u6708\u6700\u540e\u4e00\u4e2a\u661f\u671f" ',a[4],'\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"lastVal" value\x3d"',val[4],'" /\x3e','\x3cspan class\x3d"cron-tips"\x3e(1-7)\x3c/span\x3e\x3c/div\x3e','\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[5]" value\x3d"assign" title\x3d"\u6307\u5b9a" ',a[5],"\x3e\x3c/div\x3e");b.push("\x3cdiv\x3e");for(a=1;7>=a;a++)b.push('\x3cinput type\x3d"checkbox" lay-skin\x3d"primary" name\x3d"weeks[',a,']" value\x3d"',a,'" title\x3d"',a,'" ',-1<val[5].indexOf(""+a)?"checked":"","\x3e");b.push("\x3c/div\x3e");b.push("\x3c/div\x3e");return b.join("")};f.prototype.getYearsElem=function(){var b=['\x3cdiv class\x3d"layui-tab-item layui-form" lay-filter\x3d"cronYearForm"\x3e'],a=["","",""];val=["",""];"*"==this.cron[6]?a[0]="checked":""==this.cron[6]||" "==this.cron[6]?a[1]="checked":2==this.cron[6].split("-").length&&(a[2]="checked",val[0]=this.cron[6].split("-")[0],val[1]=this.cron[6].split("-")[1]);b.push('\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[6]" value\x3d"all" title\x3d"\u6bcf\u5e74" ',a[0],"\x3e\x3c/div\x3e",'\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[6]" value\x3d"none" title\x3d"\u4e0d\u6307\u5b9a" ',a[1],"\x3e\x3c/div\x3e",'\x3cdiv\x3e\x3cinput type\x3d"radio" name\x3d"type[6]" value\x3d"range" title\x3d"\u5468\u671f" ',a[2],"/\x3e",'\x3cdiv class\x3d"cron-input-mid"\x3e\u4ece\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"rangeStart" value\x3d"',val[0],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e-\x3c/div\x3e\x3cinput class\x3d"cron-input" type\x3d"number" name\x3d"rangeEnd" value\x3d"',val[1],'"/\x3e','\x3cdiv class\x3d"cron-input-mid"\x3e\u5e74\x3c/div\x3e\x3c/div\x3e');b.push("\x3c/div\x3e");return b.join("")};f.prototype.tool=function(b,a){var c=this,f=c.config,k={calSeconds:function(){var a=h.val("cronSecForm"),b=a["type[0]"];if("range"==b&&d(a.rangeStart)&&d(a.rangeEnd))c.cron[0]=a.rangeStart+"-"+a.rangeEnd;else if("per"==b&&d(a.perFrom)&&d(a.perVal))c.cron[0]=a.perFrom+"/"+a.perVal;else if("assign"==b){var e=[];layui.each(a,function(a,b){/^seconds/.test(a)&&e.push(b)});c.cron[0]=e.length?e.join(","):"*"}else"all"==b&&(c.cron[0]="*")},calMinutes:function(){var a=h.val("cronMinForm"),b=a["type[1]"];if("range"==b&&d(a.rangeStart)&&d(a.rangeEnd))c.cron[1]=a.rangeStart+"-"+a.rangeEnd;else if("per"==b&&d(a.perFrom)&&d(a.perVal))c.cron[1]=a.perFrom+"/"+a.perVal;else if("assign"==b){var e=[];layui.each(a,function(a,b){/^minutes/.test(a)&&e.push(b)});c.cron[1]=e.length?e.join(","):"*"}else"all"==b&&(c.cron[1]="*")},calHours:function(){var a=h.val("cronHourForm"),b=a["type[2]"];if("range"==b&&d(a.rangeStart)&&d(a.rangeEnd))c.cron[2]=a.rangeStart+"-"+a.rangeEnd;else if("per"==b&&d(a.perFrom)&&d(a.perVal))c.cron[2]=a.perFrom+"/"+a.perVal;else if("assign"==b){var e=[];layui.each(a,function(a,b){/^hours/.test(a)&&e.push(b)});c.cron[2]=e.length?e.join(","):"*"}else"all"==b&&(c.cron[2]="*")},calDays:function(){var a=h.val("cronDayForm"),b=a["type[3]"];if("range"==b&&d(a.rangeStart)&&d(a.rangeEnd))c.cron[3]=a.rangeStart+"-"+a.rangeEnd;else if("per"==b&&d(a.perFrom)&&d(a.perVal))c.cron[3]=a.perFrom+"/"+a.perVal;else if("work"==b&&d(a.workDay))c.cron[3]=a.workDay+"W";else if("last"==b)c.cron[3]="L";else if("assign"==b){var e=[];layui.each(a,function(a,b){/^days/.test(a)&&e.push(b)});c.cron[3]=e.length?e.join(","):"*"}else"all"==b?c.cron[3]="*":"none"==b&&(c.cron[3]="?")},calMonths:function(){var a=h.val("cronMonthFrom"),b=a["type[4]"];if("range"==b&&d(a.rangeStart)&&d(a.rangeEnd))c.cron[4]=a.rangeStart+"-"+a.rangeEnd;else if("per"==b&&d(a.perFrom)&&d(a.perVal))c.cron[4]=a.perFrom+"/"+a.perVal;else if("assign"==b){var e=[];layui.each(a,function(a,b){/^months/.test(a)&&e.push(b)});c.cron[4]=e.length?e.join(","):"*"}else"all"==b?c.cron[4]="*":"none"==b&&(c.cron[4]="?")},calWeeks:function(){var a=h.val("cronWeekForm"),b=a["type[5]"];console.log(a);if("range"==b&&d(a.rangeStart)&&d(a.rangeEnd))c.cron[5]=a.rangeStart+"-"+a.rangeEnd;else if("per"==b&&d(a.perFrom)&&d(a.perVal))c.cron[5]=a.perFrom+"#"+a.perVal;else if("last"==b&&d(a.lastVal))c.cron[5]=a.lastVal+"L";else if("assign"==b){var e=[];layui.each(a,function(a,b){/^weeks/.test(a)&&e.push(b)});c.cron[5]=e.length?e.join(","):"*"}else"all"==b?c.cron[5]="*":"none"==b&&(c.cron[5]="?")},calYears:function(){var a=h.val("cronYearForm"),b=a["type[6]"];"range"==b&&d(a.rangeStart)&&d(a.rangeEnd)?c.cron[6]=a.rangeStart+"-"+a.rangeEnd:"all"==b?c.cron[6]="*":"none"==b&&(c.cron[6]="")},calculate:function(){k.calSeconds();k.calMinutes();k.calHours();k.calDays();k.calMonths();k.calWeeks();k.calYears();return"?"!=c.cron[5]&&"?"!=c.cron[3]?(layer.msg("\u4e0d\u652f\u6301\u5468\u53c2\u6570\u548c\u65e5\u53c2\u6570\u540c\u65f6\u5b58\u5728"),!1):!0},run:function(){if(k.calculate()){var a=c.cron.join(" ").trim();f.url&&g.post(f.url,{cron:a},function(a){0==a.code?g("#run-list").empty().append(a.data.join("\x3cbr\x3e")):layer.alert(a.msg,{icon:2,title:"\u9519\u8bef"})},"json");f.done(a)}},confirm:function(){if(k.calculate()){var a=c.cron.join(" ").trim();f.done&&f.done(a);c.remove()}}};k[a]&&k[a]()};f.prototype.position=function(){var b=this.config,a=b.elem.getBoundingClientRect(),c=this.elemCron.offsetWidth,d=this.elemCron.offsetHeight,f=function(a){a=a?"scrollLeft":"scrollTop";return document.body[a]|document.documentElement[a]},g=function(a){return document.documentElement[a?"clientWidth":"clientHeight"]},h=a.left,e=a.bottom;h+c+5>g("width")&&(h=g("width")-c-5);e+d+5>g()&&(e=a.top>d?a.top-d:g()-d,e-=10);this.elemCron.style.left=h+("fixed"===b.position?0:f(1))+"px";this.elemCron.style.top=e+("fixed"===b.position?0:f())+"px"};f.prototype.remove=function(){g(".layui-cron").remove()};f.prototype.isInput=function(b){return/input|textarea/.test(b.tagName.toLocaleLowerCase())};l.render=function(b){b=new f(b);return n.call(b)};m("cron",l)});