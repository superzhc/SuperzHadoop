layui.define(["jquery","util","layer"],function(h){var b=layui.$,k=layui.util,g=layui.layer;b("head link:last")[0]&&b("head link:last").after('\x3cstyle type\x3d"text/css"\x3e.layui-number-input-container{position:relative;width:100%}.layui-input-number::-webkit-outer-spin-button,.layui-input-number::-webkit-inner-spin-button{-webkit-appearance: none;}.layui-input-number{-moz-appearance: textfield;padding-right:22px}.layui-number-input-btn{position:absolute;top:0;right:0;width:20px;height:100%;}.layui-number-input-btn i{position:absolute;width:20px;height:50%;bottom:0;font-size:12px;text-align:center;line-height:16px;cursor: pointer;}.layui-number-input-btn i:first-child{top:0}.layui-number-input-btn i:hover{background:#eee;}\x3c/style\x3e')||b("head").append('\x3cstyle type\x3d"text/css"\x3e.layui-number-input-container{position:relative;width:100%}.layui-input-number::-webkit-outer-spin-button,.layui-input-number::-webkit-inner-spin-button{-webkit-appearance: none;}.layui-input-number{-moz-appearance: textfield;padding-right:22px}.layui-number-input-btn{position:absolute;top:0;right:0;width:20px;height:100%;}.layui-number-input-btn i{position:absolute;width:20px;height:50%;bottom:0;font-size:12px;text-align:center;line-height:16px;cursor: pointer;}.layui-number-input-btn i:first-child{top:0}.layui-number-input-btn i:hover{background:#eee;}\x3c/style\x3e');var n={options:{elem:"input[number-input]"},render:function(e){this.options=b.extend(this.options,e);b(this.options.elem).not("[lay-ignore]").addClass("layui-input-number").wrap('\x3cdiv class\x3d"layui-number-input-container"\x3e\x3c/div\x3e');b(this.options.elem).not("[lay-ignore]").after('\x3cdiv class\x3d"layui-number-input-btn"\x3e\x3ci class\x3d"layui-icon layui-icon-up" lay-click\x3d"numberUp"\x3e\x3c/i\x3e\x3ci class\x3d"layui-icon layui-icon-down" lay-click\x3d"numberDown"\x3e\x3c/i\x3e\x3c/div\x3e');this.listen()},listen:function(){var e=this;b(e.options.elem).bind("input propertychange",function(){var a=b(this).val();b(this).val(a.replace(/[^\-?\d.]/g,""))});b(e.options.elem).keydown(function(a){a=a||window.event;switch(a.keyCode||a.which){case 38:b(this).siblings(".layui-number-input-btn").children('[lay-click\x3d"numberUp"]').trigger("click").css("background","#eee");break;case 40:b(this).siblings(".layui-number-input-btn").children('[lay-click\x3d"numberDown"]').trigger("click").css("background","#eee")}return!1});b(e.options.elem).keyup(function(){var a=event||window.event;switch(a.keyCode||a.which){case 38:b(this).siblings(".layui-number-input-btn").children('[lay-click\x3d"numberUp"]').css("background","");break;case 40:b(this).siblings(".layui-number-input-btn").children('[lay-click\x3d"numberDown"]').css("background","")}return!1});var d;b('[lay-click\x3d"numberUp"],[lay-click\x3d"numberDown"]').mousedown(function(){var a=b(this);d=setInterval(function(){a.trigger("click")},200)});b('[lay-click\x3d"numberUp"],[lay-click\x3d"numberDown"]').mouseup(function(){clearInterval(d)});b('[lay-click\x3d"numberUp"],[lay-click\x3d"numberDown"]').mouseout(function(){clearInterval(d)});k.event("lay-click",{numberUp:function(a){a=a.parent().parent().children(".layui-input-number");var c=Number(a.val()||0),b=a.attr("step")||1,d=Number(a.attr("max"));if(void 0!=d&&c>=d)return g.tips("\u6700\u5927\u503c"+d,a,{tips:1}),!1;c=e.add(c,parseFloat(b));a.val("").focus().val(c)},numberDown:function(a){a=a.parent().parent().children(".layui-input-number");var c=a.val()||0,b=a.attr("step")||1,d=a.attr("min");if(void 0!=d&&c<=d)return g.tips("\u6700\u5c0f\u503c"+d,a,{tips:1}),!1;c=e.subtraction(c,b);a.val("").focus().val(c)}})},add:function(b,d){var a,c;try{a=b.toString().split(".")[1].length}catch(l){a=0}try{c=d.toString().split(".")[1].length}catch(l){c=0}a=Math.pow(10,Math.max(a,c));return(this.multiplication(b,a)+this.multiplication(d,a))/a},subtraction:function(b,d){var a,c,e;try{a=b.toString().split(".")[1].length}catch(f){a=0}try{c=d.toString().split(".")[1].length}catch(f){c=0}e=Math.pow(10,Math.max(a,c));return((b*e-d*e)/e).toFixed(a>=c?a:c)},multiplication:function(b,d){var a=0,c=b.toString(),e=d.toString();try{a+=c.split(".")[1].length}catch(f){}try{a+=e.split(".")[1].length}catch(f){}return Number(c.replace(".",""))*Number(e.replace(".",""))/Math.pow(10,a)},division:function(b,d){var a=0,c=0,e,f;try{a=b.toString().split(".")[1].length}catch(m){}try{c=d.toString().split(".")[1].length}catch(m){}with(Math)return e=Number(b.toString().replace(".","")),f=Number(d.toString().replace(".","")),this.multiplication(e/f,pow(10,c-a))}};h("numberInput",{render:function(b){n.render(b)}})});