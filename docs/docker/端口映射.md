# 端口映射

Docker 容器在启动的时候，如果不指定端口映射参数，在容器外部是无法通过网络来访问容器内的网络应用和服务的。

端口映射可使用 `-p`、`-P` 来实现：

- `-p`：指定要映射的端口，一个指定端口上只可以绑定一个容器
- `-P`：将容器内部开放的网络端口随机映射到宿主机的一个端口上

端口映射支持的格式：

- `ip:hostport:containerport`：指定 ip、指定宿主机 port、指定容器 port
- `ip::containerport `：指定 ip、未指定宿主机 port（随机）、指定容器 port
- `hostport:containerport`：未指定 ip、指定宿主机 port、指定容器 port

**查看映射端口配置**

```bash
docker port container_ID #容器ID
#结果输出
80/tcp -> 0.0.0.0:800
```

## 端口映射的示例

**将容器暴露的所有端口，都随机映射到宿主机上**

> **不推荐使用**

```bash
docker run -P -it centos /bin/bash
```

**将容器指定端口随机映射到宿主机一个端口上**

```bash
docker run -P 80 -it centos /bin/bash
```

**将容器 ip 和端口，随机映射到宿主机上**

```bash
docker run -P 192.168.0.100::80 -it centos /bin/bash
```

以上指令会将容器的 ip:`192.168.0.100` 和 80 端口，随机映射到宿主机的一个端口上。

**将容器 ip 和端口，指定映射到宿主机上**

```bash
docker run -p 192.168.0.100:8000:80 -it centos /bin/bash
```

**将容器端口，指定映射到宿主机上**

```bash
docker run -d -it -p 800:80 centos /bin/bash 
```