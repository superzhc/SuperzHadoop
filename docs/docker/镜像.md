# Image：镜像

## 操作

### `docker search`：搜索镜像

**语法**

```bash
docker search <image_name>
```

### `docker pull`：拉取镜像

**语法**

```bash
docker pull [选项] [Docker Registry 地址[:端口]/]仓库名[:标签]
```

- Docker 镜像仓库地址：地址的格式一般是 `<域名/IP>[:端口号]`，默认地址是 Docker Hub。
- 仓库名：这里的仓库名是两段式名称，即 `<用户名>/<软件名>`。对于 Docker Hub，如果不给出用户名，则默认为 library，也就是官方镜像。

**示例**

```bash
docker pull ubuntu:16.04
```

上面的命令中没有给出 Docker 镜像仓库地址，因此将会从 Docker Hub 获取镜像。而镜像名称是 `ubuntu:16.04`，因此将会获取官方镜像 `library/ubuntu` 仓库中标签为 16.04 的镜像。

### `docker image ls`：列出镜像

```bash
docker image ls
```

列表包含了仓库名、标签、镜像 ID、创建时间以及所占用的空间。镜像 ID 则是镜像的唯一标识，一个镜像可以对应多个标签。

### `docker image rm`：删除本地镜像

如果要删除本地的镜像，可以使用 `docker image rm` 命令，其格式为：

```bash
docker image rm [选项] <镜像1> [<镜像2> ...]
```

或者

```bash
docker rmi 镜像名
```

或者用 ID、镜像名、摘要删除镜像 其中，<镜像> 可以是 镜像短 ID、镜像长 ID、镜像名 或者 镜像摘要。

### `docker run`：运行镜像

**语法**

```bash
docker run [选项] [参数]
```

**示例**

```bash
docker run -it --rm ubuntu:16.04 /bin/bash
```

## 迁移镜像

Docker 还提供了 `docker load` 和 `docker save` 命令，用以将镜像保存为一个 tar 文件，然后传输到另一个位置上，再加载进来。

使用 `docker save` 命令可以将镜像保存为归档文件。示例：

```bash
docker save alpine | gzip > alpine-latest.tar.gz
```

使用 `docker load` 加载镜像，示例：

```bash
docker load -i alpine-latest.tar.gz
```

## 镜像源

**配置镜像源**

```sh
vi /etc/docker/daemon.json

# 内容如下：
{
  "registry-mirrors": [
    "http://hub-mirror.c.163.com",
    "https://docker.mirrors.ustc.edu.cn"
  ]
}

# 退出并保存
:wq

# 使配置生效
systemctl daemon-reload

# 重启Docker
systemctl restart docker
```