# 数据共享与持久化

在容器中管理数据主要有两种方式：

- 数据卷（Data Volumes）
- 挂载主机目录 (Bind mounts)

## 数据卷（Volume）

数据卷是一个可供一个或多个容器使用的特殊目录，它绕过 UFS，可以提供很多有用的特性：

- *数据卷* 可以在容器之间共享和重用
- 对 *数据卷* 的修改会立马生效
- 对 *数据卷* 的更新，不会影响镜像
- *数据卷* 默认会一直存在，即使容器被删除

<!--

~~**绑定数据卷**~~

在创建容器时，可以将主机本地的任意路径挂载到容器内作为数据卷。

```bash
# 把 d 盘 下的test 文件夹 与 容器中的 mytest 文件夹关联到一起
docker run -it -v /d/test:/mytest centos
```

*注意*：本地目录的路径必须是绝对路径，容器内路径可以为相对路径。如果目录不存在，Docker 会自动创建。Docker 挂载数据卷的默认权限是读写（rw），用户也可以通过 ro 指定为只读。

-->

> Linux 下数据卷的默认位置：`/var/lib/docker/volumes`

### 使用

**查看数据卷**

```sh
# 查看所有数据卷
docker volume ls

# 查看指定数据卷详细信息
docker volume inspect demo_vol
```

**创建数据卷**

```sh
docker volume create demo_vol
```

**使用数据卷**

```sh
docker run -d -it -v demo_vol:/usr/lib/demo --name=demo_container demo_images
```

**清理数据卷**

```sh
# 需要分为三个步骤来清理数据卷
## 1. 暂停容器实例
docker stop demo_container
## 2. 删除容器实例
docker rm demo_container
## 3. 删除数据卷
docker volume rm demo_vol
```

## 挂载主机目录