HBase 的 Scan 方法是基于 Rowkey 进行数据扫描的，过程中 client 会将请求转换为服务端的 RPC 请求。那么这个时候可以考虑的优化有以下三点：

- 减少带宽：通过过滤器减少无用数据的传输
- 减少 RPC 请求的次数
- 加缓存

具体的转化为 scan 相关的操作如下：

1. scan 可以设置过滤器：过滤器可以减少数据网络传输的数据量，过滤器可以用来扫描 Rowkey 不连续的数据
2. scan 可以设置每批次的扫描行数：`scan.setCaching(20);`设置一个批次应该请求几行数据，几个Result
3. scan 可以设置每批次扫描的列数：`scan.setBatch(1);`设置每一行请求几列的数据，一个 Result 有几个 Cell
4. 对于一次扫描，频繁使用的数据可以设置缓存：`scan.setCacheBlocks(false);`不建议使用
5. scan 占用内存：`scan的并发数*cache数*单个 Result大小`

通过 2、3可以减少 RPC 请求的次数，这样可以提升扫描性能，但是也会带来 GC 的风险。

> 重要的计算公式：
>
> RPC次数 = (行数 * 每行的列数)/MIN(每行的列数，批量大小)/扫描器缓存

