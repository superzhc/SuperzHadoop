# 开发环境配置

## 1. 下载源码且进入源码目录

```shell
git clone https://github.com/open-metadata/OpenMetadata
cd openmetadata
```

## 2. 创建虚拟环境

例如：

```shell
python3 -m venv env
source env/bin/activate
```

## 3. 执行 `datamodel_generation.py` 生成代码

**Windows**

```shell
rm -rf ingestion/src/metadata/generated
mkdir -p ingestion/src/metadata/generated
python scripts/datamodel_generation.py
```

**Linux**

需要安装 make 命令，第三四两步合并到一起，直接执行 `make generate`

注意事项：需要保证 antlr4 在 Linux 环境已经安装部署了

## 4. 执行 antlr4 生成代码

antlr4 下载地址：<https://www.antlr.org/download/antlr-4.9.2-complete.jar>，详细安装过程网上自行百度

**Windows**

```shell
# 个人简单用法
java -jar /d/soft/antlr4/antlr-4.9.2-complete.jar -Dlanguage=Python3 -o ingestion/src/metadata/generated/antlr ${PWD}/openmetadata-spec/src/main/antlr4/org/openmetadata/schema/*.g4
```

## 5. 执行安装

**Windows**

```shell
python -m pip install "ingestion[dev]/"
python -m pip install "ingestion[test]/"
```

**Linux**

```shell
make install_dev
# precommit_install 有执行的不要么，待定
make install_test precommit_install
```