# top

top 命令输出会显示系统的很多信息。在默认运行时，top 命令会显示如下输出：

![image-20200407092625451](D:\superz\BigData-A-Question\Linux\images\image-20200407092625451.png)

**系统运行时间和平均负载**

![image-20200407092745572](D:\superz\BigData-A-Question\Linux\images\image-20200407092745572.png)

这些字段显示：

- 当前时间
- 系统已运行的时间
- 当前登录用户的数量
- 系统在之前 1、5、15 的平均负载，也可以看出系统负载是上升、平稳、下降的趋势，当这个值超过 CPU 可执行单元的数目，则表示 CPU 的性能已经饱和成为瓶颈了

**任务**

![image-20200407093406610](D:\superz\BigData-A-Question\Linux\images\image-20200407093406610.png)

第二行显示的是任务或者进程的总结。进程可以处于不同的状态。这里显示了全部进程的数量，除此之外，还有正在运行、睡眠、停止、僵尸进程的数量

**CPU 状态**

![image-20200407094049766](D:\superz\BigData-A-Question\Linux\images\image-20200407094049766.png)

下一行显示的是 CPU 状态。这里显示了不同模式下的所占 CPU 时间的百分比，这些不同的 CPU 时间表示：

- us，user：运行（未调整优先级的）用户进程的 CPU 时间
- sy，system：运行内核进程的 CPU 时间
- ni，niced：运行已调整优先级的用户进程的 CPU 时间
- id，idle：在空闲状态所占用的时间
- wa，IO wait：用于等待 IO 完成的 CPU 时间
- hi：处理硬件中断的 CPU 时间
- si：处理软件中断的 CPU 时间
- st：这个虚拟机被 hypervisor 使用的 CPU 时间

**内存使用**

![image-20200407094822319](D:\superz\BigData-A-Question\Linux\images\image-20200407094822319.png)

接下来两行显示内存使用率，第一行是物理内存使用，第二行是虚拟内存使用

物理内存显示如下：全部可用内存、空闲内存、已使用内存、缓冲内存。

交换空间显示如下：全部、空闲、已使用和缓冲交换空间

**进程信息**

![image-20200407095227491](D:\superz\BigData-A-Question\Linux\images\image-20200407095227491.png)

该部分是显示的进程。

默认情况下 top 显示的进程属性如下：

- PID：进程 ID，进程的唯一标识符
- USER：进程所有者的实际用户名
- PR：进程的调度优先级。这个字段的一些值是 `rt`。这意味着这些进程运行在实时态
- NI：进程的优先级，越小的值意味着越高的优先级
- VIRT：进程使用的虚拟内存
- RES：驻留内存大小，驻留内存是任务使用的非交换物理内存大小
- SHR：进程使用的共享内存
- S：进程的状态，它有以下不同的值：
  - D：不可中断的睡眠态
  - R：运行态
  - S：睡眠态
  - T：被跟踪或已停止
  - Z：僵尸态
- %CPU：自从上一次更新时到现在任务所使用的 CPU 时间百分比
- %MEM：进程使用的可用物理内存百分比
- TIME+：任务启动后到现在所使用的全部 CPU 时间，精确到百分之一秒
- COMMAND：运行进程所使用的命令

还有许多信息在默认情况下不会显示输出，它们可以显示进程的页错误、有效组和组 ID 和其他更多的信息。

## 交互命令

### 刷新显示

top 命令默认在一个特定间隔（3 秒）后刷新显示，若要手动刷新，用户可以输入回车或者空格。

### 设置显示的刷新间隔

当按下 `d` 或 `s` 时，将被提示输入一个值（以秒为单位），它会以设置的值作为刷新间隔。

### 显示进程启动时的完整路径和程序名

按下 `c`

### 特定用户的进程

按下 `u` 显示特定用户的进程，会被提示输入用户名，如果不输入将会显示全部用户。 

### 任务的数量

`n` 或 `#` 设置最大显示的任务数量

## 命令行选项

### `-c`：显示命令/程序名

### `-d`：设置延迟间隔

设置 top 的显示间隔（以秒计），比如：

```sh
$ top -d 1
```

将会以 1 秒的刷新间隔启动 top

### `-n`：设置迭代数量

用 `-n` 选项，可以设置 top 退出前迭代的次数

```sh
$ top -n 3
```

将会在刷新输出 3 次后退出。



































