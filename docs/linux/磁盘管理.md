# 磁盘管理

## 查看磁盘

```sh
# 查看已加载磁盘信息
df -h

# 查看所有磁盘信息，包括未加载磁盘
fdisk -l

# 检查磁盘
lsblk
```

## 对新加载磁盘进行分区

```sh
fdisk /dev/vdb

## 执行上述命令会进行如下的交互：
n    ### 创建新磁盘分区
p    ### 选择 primary partition
1    ### 选择分区数
回车  ### 选择开始柱头(直接回车默认)
回车  ### 选择结束柱头(直接回车默认)
w    ### 保存
```

## 格式化分区

```sh
# 注意，此处格式化的是分区而不是磁盘，所以使用 /dev/vdb1
mkfs -t ext4 -c /dev/vdb1
```

## 挂载磁盘

```sh
mount /dev/vdb1 /data
```

> 注意：上述的挂载方式只是一次性的，在服务器重载后就会丢失

**永久挂载分区**

编辑 `/etc/fstab`，添加如下内容：

```sh
/dev/vdb1                                 /data                   ext4    defaults        1 2
```

```txt
/etc/fstab每列含义如下:
硬盘路径　　　　     文件路径（挂载点）　　文件系统类型　　设备的自定义选项　　是否转存　　fsck的顺序

转存：0 不转存，不备份　　   1转存，备份
fsck：开机检查磁盘的顺序　　0表示不检查　　1234...为检查顺序
```