<!--
 * @Github       : https://github.com/superzhc/BigData-A-Question
 * @Author       : SUPERZHC
 * @CreateDate   : 2020-12-25 14:03:54
 * @LastEditTime : 2020-12-25 14:35:34
 * @Copyright 2020 SUPERZHC
-->
# 搭建环境

> 官方下载地址：<https://www.python.org/downloads/>
> 
> Windows 系统下载地址：<https://www.python.org/downloads/windows/>

## Windows

windows 版本是个 exe 执行文件，直接点击安装即可

## Linux\[Python3\]

**安装依赖包**

```shell
yum install -y zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc make libffi-devel
```

**安装OpenSSL**

> 注意：Currently Python versions 3.6 to 3.9 are compatible with OpenSSL 1.0.2, 1.1.0, and 1.1.1.

```shell
mkdir /usr/local/openssl
cd /usr/local/openssl

# 下载安装包
wget https://www.openssl.org/source/openssl-1.1.1q.tar.gz
tar -zxvf openssl-1.1.1q.tar.gz

# 编译安装
cd openssl-1.1.1q
## 不需要zlib
./config --prefix=/usr/local/openssl no-zlib
make && make install

# 备份原配置
mv /usr/bin/openssl /usr/bin/openssl.bak
mv /usr/include/openssl/ /usr/include/openssl.bak

# 配置openssl
ln -s /usr/local/openssl/include/openssl /usr/include/openssl
ln -s /usr/local/openssl/lib/libssl.so.1.1 /usr/local/lib64/libssl.so
ln -s /usr/local/openssl/bin/openssl /usr/bin/openssl
## 将软链接写入openssl库文件的搜索路径
echo "/usr/local/openssl/lib" >> /etc/ld.so.conf
ldconfig -v #使修改后的/etc/ld.so.conf生效

# 验证
openssl version
```

**安装Python3**

1. 下载 Python3.x 安装包
    ```shell
    wget https://www.python.org/ftp/python/3.8.16/Python-3.8.16.tgz
    ```
2. 创建存放 Python3.x 的文件夹
    ```shell
    mkdir /usr/local/python3/
    ```
3. 解压安装包
    ```shell
    mv Python-3.8.16.tgz /usr/local/python3
    tar -zxvf Python-3.8.16.tgz
    ```
4. 编译安装
    ```shell
    ./configure prefix=/usr/local/python3 -with-openssl=/usr/local/openssl
    make && make install
    ```
5. 添加软链接
    ```shell
    # 建立新的软链接至python3.x，原本旧链接无需删除
    # 原因在于例如CentOS的yum源是用python2.x编写的，删除可能会出一些错误
    ln -s /usr/local/python3/bin/python3.8 /usr/bin/python3
    ln -s /usr/local/python3/bin/pip3.8 /usr/bin/pip3
    ```
6. 验证
    ```shell
    python3 --version
    ```

## FAQ

### Linux 编译安装报错：缺少软件包

**`configure: error: no acceptable C compiler found in $PATH`**

```shell
yum install -y gcc
```

**`zipimport.ZipImportError: can't decompress data; zlib not available`**

```shell
yum install -y zlib*
```

**`ModuleNotFoundError: No module named '_ctypes'`**

```shell
yum install -y libffi-devel
```