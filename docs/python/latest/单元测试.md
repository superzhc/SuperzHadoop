# 单元测试

> 单元测试用于核实函数的某个方面没有问题；测试用例是一组单元测试，这些单元测试一起核实函数在各种情形下的行为都符合要求。良好的测试用例考虑到了函数可能收到的各种输入，包含针对所有这些情形的测试。全覆盖式测试用例包含一整套单元测试，涵盖了各种可能的函数使用方式。

## `unittest`

> **Python 标准库中的模块 unittest 提供了代码测试工具**。

### Test Fixtures

`setUpClass()` -> `setUp()` -> `tearDown()` -> `tearDownClass()`

### 测试用例：`TestCase`

**定义测试类**

```py
import unittest
class ChildTestCase(unittest.TestCase):...
```

#### 跳过测试用例

**直接跳过**

```py
@unittest.skip(message)
```

**满足条件跳过**

```py
@unittest.skipIf(condition, message)
```

> 因为 `@unittest.skipIf()` 语句执行优先级大于所有 `def`，即无论是 `setUp()`、`setUpClass()` 还是测试用例都在其之后执行，所以定义必须在类下

**满足条件不跳过**

```py
@unittest.skipUnless(condition, message)
```

### 测试套件：`TestSuite`

> 测试套件用于执行已编写的测试用例
>
> 测试套件可用于执行不同类测试用例之间指定测试用例组合测试，也可指定某类、某些类测试用例单独测试

**定义测试套件**

```py
suite = unittest.TestSuite()
```

**添加测试用例**

```py
# 添加单个测试用例
suite.addTest(ChildTestCase("method_name"))

# 添加多个测试用例
suite.addTests([ChildTestCase("method_name1"), ChildTestCase("method_name2")])
```

#### 装载器

**定义装载器**

```py
loader = unittest.TestLoader()
```

```py
loadTestsFromTestCase('测试用例的类名')
loadTestsFromModule('测试用例文件名/模块名')
loadTestsFromName('测试用例文件名/测试用例类名通用')
```

### `TestRunner`
