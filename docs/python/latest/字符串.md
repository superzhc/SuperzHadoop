# 字符串

## 运算符

| 操作符   | 描述                                                                                                                    |
| -------- | ----------------------------------------------------------------------------------------------------------------------- |
| `+`      | 字符串连接                                                                                                              |
| `*`      | 重复输出字符串                                                                                                          |
| `[]`     | 通过索引获取字符串中字符                                                                                                |
| `[ : ]`  | 截取字符串中的一部分，遵循左闭右开原则，`str[0:2]` 是不包含第 3 个字符的                                                |
| `in`     | 成员运算符 - 如果字符串中包含给定的字符返回 True                                                                        |
| `not in` | 成员运算符 - 如果字符串中不包含给定的字符返回 True                                                                      |
| `r/R`    | 原始字符串：所有的字符串不进行转义特殊或不能打印的字符。 原始字符串只需要在字符串的第一个引号前加上字母 r（可以大小写） |
| `%`      | 格式字符串                                                                                                              |

## 格式化

### `%` 格式化

在 Python 中，使用 `%` 字符串格式化使用与 C 中 sprintf 函数一样的语法。

**字符串格式化符号**

| 符号 | 描述                                  |
| ---- | ------------------------------------- |
| `%c` | 格式化字符及其ASCII码                 |
| `%s` | 格式化字符串                          |
| `%d` | 格式化整数                            |
| `%u` | 格式化无符号整型                      |
| `%o` | 格式化无符号八进制数                  |
| `%x` | 格式化无符号十六进制数                |
| `%X` | 格式化无符号十六进制数（大写）        |
| `%f` | 格式化浮点数字，可指定小数点后的精度  |
| `%e` | 用科学计数法格式化浮点数              |
| `%E` | 作用同 `%e`，用科学计数法格式化浮点数 |
| `%g` | `%f` 和 `%e` 的简写                   |
| `%G` | `%f` 和 `%E` 的简写                   |
| `%p` | 用十六进制数格式化变量的地址          |

**格式化操作符辅助指令**

| 符号    | 功能                                                                                    |
| ------- | --------------------------------------------------------------------------------------- |
| `*`     | 定义宽度或者小数点精度                                                                  |
| `-`     | 用做左对齐                                                                              |
| `+`     | 在正数前面显示加号( `+` )                                                               |
| `<sp>`  | 在正数前面显示空格                                                                      |
| `#`     | 在八进制数前面显示零('0')，在十六进制前面显示 '0x' 或者 '0X'(取决于用的是 'x' 还是 'X') |
| `0`     | 显示的数字前面填充 '0' 而不是默认的空格                                                 |
| `%`     | 转义，'%%' 输出一个单一的 '%'                                                           |
| `(var)` | 映射变量(字典参数)                                                                      |
| `m.n.`  | m 是显示的最小总宽度，n 是小数点后的位数(如果可用的话)                                  |

**转换符格式化**

> 转换符格式化 (conversion specifier) 可以引用字典变量。 
> 
> 转换符的格式为 `%(mapping_key)flags`，mapping_key 指明引用变量的名称，flags 指明转换格式。

```py
print('%(language)s has %(number)01d quote types.' % {'language': "Python", "number": 2})

# Python has 2 quote types.
```

### `format()` 格式化

> Python2.6 开始，新增了一种格式化字符串的函数 `str.format()`，它增强了字符串格式化的功能。

参数替换支持如下格式：

```py
# 不设置指定位置，按默认顺序
"{} {}".format("hello", "world")
# 设置指定位置
"{0} {1}".format("hello", "world")
"{1} {0} {1}".format("hello", "world")

# 设置参数
{field_name}
{field_name!conversion}
{field_name:format_specification}
{field_name!conversion:format_specification}
```

### f-string

> f-string 是 python3.6 之后版本添加的，称之为字面量格式化字符串，是新的格式化字符串的语法。

f-string 格式化字符串以 `f` 开头，后面跟着字符串，字符串中的表达式用大括号 `{}` 包起来，它会将变量或表达式计算后的值替换进去。

## 函数

| 语法                          | 描述                                                                                                                                |
| ----------------------------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| `s.find(t, start, end)`       | 返回 t 在 s 中（或在 s 的 `start:end` 分片中）的最左位置，如果没有找到，就返回 `-1`                                                 |
| `str.rfind(t, start, end)`    | 返回 t 在 s 中（或在 s 的 `start:end` 分片中）的最右位置，如果没有找到，就返回 `-1`                                                 |
| `s.index(t, start, end)`      | 返回 t 在 s 中的最左边位置（或在 s 的 `start:end` 分片中），如果没有找到，就产生 ValueError 异常                                    |
| `str.rindex(t, start, end)`   | 返回 t 在 s 中的最右边位置（或在 s 的 `start:end` 分片中），如果没有找到，就产生 ValueError 异常                                    |
| `s.startswith(x, start, end)` | 如果 s（或 s 的 `start:end` 分片）以字符串 x 开始（或以元组 x 中的任意字符串开始），就返回 True，否则返回 False                     |
| `s.endswith(x, start, end)`   | 如果 s（或在 s 的 `start:end` 分片）以字符串 x（或元组 x 中的任意字符串）结尾，就返回 True，否则返回 False                          |
| `s.lower()`                   | 将 s 中的字符变为小写                                                                                                               |
| `s.upper()`                   | 返回 s 的大写化版本                                                                                                                 |
| `s.swapcase()`                | 返回 s 的副本，并将其中大写字符变为小写，小写字符变为大写                                                                           |
| `s.replace(t, u, n)`          | 返回 s 的一个副本，其中每个（或最多 n 个，如果给定）字符串 t 使用 u 替换                                                            |
| `s.split(t, n)`               | 返回一个字符串列表，要求在字符串 t 处至多分割 n 次，如果没有给定 n，就分割尽可能多次，如果 t 没有给定，就在空白处分割               |
| `str.rsplit(t, n)`            | 从右边进行分割——只有在给定 n 并且 n 小于可能分割的最大次数时才起作用                                                                |
| `s.strip(chars)`              | 返回 s 的一个副本，并将开始处与结尾处的空白字符（或字符串 chars 中的字符）移除                                                      |
| `str.lstrip()`                | 仅剥离起始处的相应字符                                                                                                              |
| `str.rstrip()`                | 只剥离结尾处的相应字符                                                                                                              |
| `s.capitalize()`              | 返回字符串 s 的副本，并将首字符变为大写                                                                                             |
| `s.title()`                   | 返回 s 的副本，并将每个单词的首字母变为大写，其他字母都变为小写                                                                     |
| `s.center(width, char)`       | 返回 s 中间部分的一个子字符串，长度为 width，并使用空格或可选的 char（长度为1的字符串）进行填充                                     |
| `s.count(t, start, end)`      | 返回字符串 s 中（或在 s 的 `start:end` 分片中）子字符串 t 出现的次数                                                                |
| `s.encode(encoding, err)`     | 返回一个 bytes 对象，该对象使用默认的编码格式或指定的编码格式来表示该字符串，并根据可选的 err 参数处理错误                          |
| `s.expandtabs(size)`          | 返回 s的一个副本，其中的制表符使用8个或指定数量的空格替换                                                                           |
| `s.isalnum()`                 | 如果 s 非空，并且其中的每个字符都是字母数字的，就返回 True                                                                          |
| `s.isalpha()`                 | 如果 s 非空，并且其中的每个字符都是字母的，就返回 True                                                                              |
| `s.isdecimal()`               | 如果 s 非空，并且其中的每个字符都是 Unicode 的基数为 10 的数字，就返回 True                                                         |
| `s.isdigit()`                 | 如果 s 非空，并且每个字符都是一个 ASCII 数字，就返回 True                                                                           |
| `s.isidentifier()`            | 如果 s 非空，并且是一个有效的标识符，就返回 True                                                                                    |
| `s.isnumeric()`               | 如果 s 非空，并且其中的每个字符都是数值型的 Unicode 字符，比如数字或小数，就返回 True                                               |
| `s.isprintable()`             | 如果 s 非空，并且其中的每个字符被认为是可打印的，包括空格，但不包括换行，就返回 True                                                |
| `s.isspace()`                 | 如果 s 非空，并且其中的每个字符都是空白字符，就返回 True                                                                            |
| `s.istitle()`                 | 如果 s 是一个非空的首字母大写的字符串，就返回 True                                                                                  |
| `s.islower()`                 | 如果 s 至少有一个可小写的字符，并且其所有可小写的字符都是小写的，就返回 True                                                        |
| `s.isupper()`                 | 如果 s 至少有一个可大写的字符，并且所有可大写的字符都是大写，就返回 True                                                            |
| `s.join(seq)`                 | 返回序列 seq 中每个项连接起来后的结果，并以 s（可以为空）在每两项之间分隔                                                           |
| `s.ljust(width, char)`        | 返回长度为 width 的字符串（使用空格或可选的 char（长度为1的字符串）进行填充）中左对齐的字符串 s 的一个副本                          |
| `str.rjust()`                 | 右对齐                                                                                                                              |
| `str.center()`                | 可以中间对齐                                                                                                                        |
| `s.partition(t)`              | 返回包含 3 个字符串的元组——字符串 s 在 t 的最左边之前的部分、t、字符串 s 在 t 之后的部分。如果 t 不在 s 内，则返回 s 与两个空字符串 |
| `str.rpartition()`            | 在 t 最右边部分进行分区                                                                                                             |
| `s.splitlines(f)`             | 返回在行终结符处进行分割产生的行列表，并剥离行终结符（除非f为True）                                                                 |
| `s.maketrans()`               |                                                                                                                                     |
| `s.translate()`               |                                                                                                                                     |
| `s.zfill(w)`                  | 返回 s 的副本，如果比 w 短，就在开始处添加 0，使其长度为 w                                                                          |

