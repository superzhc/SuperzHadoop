# Numpy

> Numpy(Numerical Python 的缩写)是一个开源的 Python 科学计算库。它提供多维数组对象，各种派生对象（如掩码数组和矩阵），以及用于数组快速操作的各种 API，有包括数学、逻辑、形状操作、排序、选择、输入输出、离散傅立叶变换、基本线性代数，基本统计运算和随机模拟等等。

NumPy 包的核心是 `ndarray` 对象。它封装了 python 原生的同数据类型的 n 维数组，为了保证其性能优良，其中有许多操作都是代码在本地进行编译后执行的。

NumPy 数组和原生 Python Array（数组）之间有几个重要的区别：

- NumPy 数组在创建时具有固定的大小，与 Python 的原生数组对象（可以动态增长）不同。更改 ndarray 的大小将创建一个新数组并删除原来的数组。
- NumPy 数组中的元素都需要具有相同的数据类型，因此在内存中的大小相同。 例外情况：Python 的原生数组里包含了 NumPy 的对象的时候，这种情况下就允许不同大小元素的数组。
- NumPy 数组有助于对大量数据进行高级数学和其他类型的操作。通常，这些操作的执行效率更高，比使用 Python 原生数组的代码更少。

## 安装

```bash
pip install numpy
```

## NumPy 中的数组

NumPy 提供的最重要的数据结构是一个称为 NumPy 数组的强大对象。NumPy 数组是通常的 Python 数组的扩展。

示例：**定义一维 NumPy 数组**

```py
import numpy as np
my_arr=np.array([1,2,3,4,5])
print(my_arr)
```

读取一维数组的元素，使用中括号和索引 `[index]` 来读取元素，如 `my_arr[0]`。

示例：**创建迭代的数组**

```py
np.arange(5)
```

示例：**创建元素都是 0 和 1 的数组**

通常的方法可以直接构建数组，数组中的元素都是 0 和 1，不过 NumPy 提供了一种便捷的函数来创建这样的数组：

```py
#创建元素都是0的一维数组，下面的示例有5个0元素
np.zeros((5))
#创建元素都是1的一维数组
np.ones((5))
```

示例：**填充指定元素的数组**

```py
np.full((2,2),7)

[
    [7.,7.]
    [7.,7.]
]
```

示例：**创建随机数组**

```py
np.random.random((5))
```

示例：**创建指定数量元素的数组**

```py
# 创建具有指定数据元素的数组，这些元素将在指定的开始值和结束值之间平均间隔
np.linspace((1.,4.,6))
```

示例：**创建二维数组**

```py
#创建一个2行3列的二维数组
my_arr2=np.zeros((2,3))
```

对于多维数组可以用 `my_arr2[i][j]` 或 `my_arr2[i,j]` 来索引，其中 `i` 表示行号，`j` 表示列号。

**数组属性**

```py
a = np.array([[11, 12, 13, 14, 15],
              [16, 17, 18, 19, 20],
              [21, 22, 23, 24, 25],
              [26, 27, 28 ,29, 30],
              [31, 32, 33, 34, 35]])

print(type(a)) # >>><class 'numpy.ndarray'>
print(a.dtype) # >>>int64
print(a.size) # >>>25
print(a.shape) # >>>(5, 5)
print(a.itemsize) # >>>8
print(a.ndim) # >>>2
print(a.nbytes) # >>>200
```

**多维数组切片**

```py
#创建二维数组
a = np.array([[11, 12, 13, 14, 15],
              [16, 17, 18, 19, 20],
              [21, 22, 23, 24, 25],
              [26, 27, 28 ,29, 30],
              [31, 32, 33, 34, 35]])
 
#读取元素
print(a[2,4]) # >>>25

#取第1行的第2到4列元素
print(a[0, 1:4]) # >>>[12 13 14]
#取第2行到第4行的第一列元素
print(a[1:4, 0]) # >>>[16 21 26]
#按照步长为2来取数组元素，即跳着取元素
print(a[::2,::2]) # >>>[[11 13 15]
                  #     [21 23 25]
                  #     [31 33 35]]
#取第2列的所有元素
print(a[:, 1]) # >>>[12 17 22 27 32]
```

## NumPy 中数组的操作

**基本操作符**

```py
a = np.arange(25)
a = a.reshape((5, 5))

b = np.array([10, 62, 1, 14, 2, 56, 79, 2, 1, 45,
              4, 92, 5, 55, 63, 43, 35, 6, 53, 24,
              56, 3, 56, 44, 78])
b = b.reshape((5,5))

print(a + b)
print(a - b)
print(a * b)
print(a / b)
print(a ** 2)
print(a < b) print(a > b)

print(a.dot(b))
```

除了 `dot()` 之外，这些操作符都是对数组进行逐元素运算。比如 `(a, b, c) + (d, e, f)` 的结果就是 `(a+d, b+e, c+f)`。它将分别对每一个元素进行配对，然后对它们进行运算。它返回的结果是一个数组。

**数组特殊运算符**

```py
a = np.arange(10)

print(a.sum()) # >>>45
print(a.min()) # >>>0
print(a.max()) # >>>9
print(a.cumsum()) # >>>[ 0  1  3  6 10 15 21 28 36 45]
```