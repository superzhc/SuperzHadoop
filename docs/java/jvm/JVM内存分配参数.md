# JVM 内存分配参数

## 设置最大堆内存

Java 应用程序可以使用的最大堆可以使用 `-Xmx` 参数指定。最大堆指的是新生代和老年代的大小之和的最大值，它是 Java 应用程序的堆上限。

```
-Xmx10M
```

## 设置最小堆内存

使用 JVM 参数 `-Xms` 可以用于设置系统的最小堆空间。也就是 JVM 启动时，所占据的操作系统内存大小。

Java 应用程序在运行时，首先会被分配 `-Xms` 指定的内存大小，并尽可能尝试在这个空间段内运行程序。当 `-Xms` 指定的内存大小确实无法满足应用程序时，JVM 才会向操作系统申请更多的内存，直到内存大小达到 `-Xmx` 指定的最大内存为止。若超过 `-Xmx` 的值，则抛出 OutOfMemoryError 异常。

如果 `-Xms` 的数值较小，那么 JVM 为了保证系统尽可能地在指定内存范围内运行，就会更加频繁地进行 GC 操作，以释放失效地内存空间，从而，会增加 Minor GC 和 Full GC 的次数，对系统性能产生一定的影响。

## 设置新生代

参数 `-Xmn` 用于设置新生代大小。设置一个较大的新生代会减小老年代的大小，这个参数对系统性能以及 GC 行为有很大的影响。新生代大小一般设置为整个堆空间的 1/4 到 1/3 左右。

## 设置新生代中 Eden 区与一个 Survivor 区的空间比例

`-XX:SurvivorRatio=8` 参数表明 Eden 和一个 Survivor 的空间比例是 `8:1`