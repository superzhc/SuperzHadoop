# GCC

## 编译

**GCC 常用编译选项**

| gcc/g++ 指令选项            | 功 能                                                                                                                                        |
| --------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| `-E`（大写）                | 预处理指定的源文件，不进行编译。                                                                                                             |
| `-S`（大写）                | 编译指定的源文件，但是不进行汇编。                                                                                                           |
| `-c`                        | 编译、汇编指定的源文件，但是不进行链接。                                                                                                     |
| `-o`                        | 指定生成文件的文件名。                                                                                                                       |
| `-llibrary`（`-I library`） | 其中 library 表示要搜索的库文件的名称。该选项用于手动指定链接环节中程序可以调用的库文件。建议 -l 和库文件名之间不使用空格，比如 `-lstdc++`。 |
| `-ansi`                     | 对于 C 语言程序来说，其等价于 `-std=c90` ；对于 C++ 程序来说，其等价于 `-std=c++98`。                                                        |
| `-std=`                     | 手动指令编程语言所遵循的标准，例如 c89、c90、c++98、c++11 等。                                                                               |

### 预处理（Preprocessing）

*示例*

```sh
# 对源码进行预处理
gcc -E demo.c -o demo.i
```

**`gcc -E` 常用选项**

| 选 项                            | 功 能                                                                                                                                                                                                                          |
| -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `-D name[=definition]`           | 在处理源文件之前，先定义宏 `name`。宏 `name` 必须是在源文件和头文件中都没有被定义过的。将该选项搭配源代码中的 `#ifdef name` 命令使用，可以实现条件式编译。如果没有指定一个替换的值（即省略 `=definition`），该宏被定义为值 1。 |
| `-U name`                        | 如果在命令行或 GCC 默认设置中定义过宏 `name`，则“取消” `name` 的定义。`-D` 和 `-U` 选项会依据在命令行中出现的先后顺序进行处理。                                                                                                |
| `-include file`                  | 如同在源代码中添加 `#include "file"` 一样。                                                                                                                                                                                    |
| `-iquote dir`                    | 对于以引号（`#include ""`）导入的头文件中，`-iquote` 指令可以指定该头文件的搜索路径。当 GCC 在源程序所在目录下找不到此头文件时，就会去 `-iquote` 指令指定的目录中查找。                                                        |
| `-I dir`                         | 同时适用于以引号 `""` 和 `<>` 导入的头文件。当 GCC 在 `-iquote` 指令指定的目录下搜索头文件失败时，会再自动去 `-I` 指定的目录中查找。*该选项在 GCC 10.1 版本中已被弃用，并建议用 `-iquote` 选项代替*。                          |
| `-isystem dir`、`-idirafter dir` | 都用于指定搜索头文件的目录，适用于以引号 `""` 和 `<>` 导入的头文件。                                                                                                                                                           |

### 编译（Compilation）

*示例*

```sh
gcc -S demo.i
```

### 汇编（Assembly）

*示例*

```sh
gcc -c demo.s
```

### 链接（Linking）