# 模块

## `find-module`

**命令**

- `find_file`：在相应路径下查找命名文件
- `find_library`：查找一个库文件
- [`find_package`](命令/find_package.md)：从外部项目查找和加载设置
- `find_path`：查找包含指定文件的目录
- `find_program`：找到一个可执行程序

**规则**

`find-module` 通常遵循特定的模式:

1. 检查用户是否为所需的包提供了自定义位置。
2. 使用 `find_` 家族中的命令搜索所需包的必需组件，即头文件、库、可执行程序等等。使用 `find_path` 查找头文件的完整路径，并使用 `find_library` 查找库。CMake 还提供 `find_file`、`find_program` 和 `find_package`。这些命令的签名如下:
```
find_path(<VAR> NAMES name PATHS paths)
```
3. 如果搜索成功，`<VAR>` 将保存搜索结果；如果搜索失败，则会设置为 `<VAR>-NOTFOUND`。NAMES 和 PATHS 分别是 CMake 应该查找的文件的名称和搜索应该指向的路径。
4. 初步搜索的结果中，可以提取版本号。示例中，`ZeroMQ` 头文件包含库版本，可以使用字符串操作和正则表达式提取库版本信息。
5. 最后，调用 `find_package_handle_standard_args` 命令。处理 `find_package` 命令的 REQUIRED、QUIET 和版本参数，并设置 ZeroMQ_FOUND 变量。

## FAQ

### 获取现有模块的列表

```sh
cmake --help-module-list
```

### 获取模块的文档

```sh
# cmake --help-module Find<LibaryName>
cmake --help-module FindPythonInterp
```